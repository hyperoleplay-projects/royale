-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
vSERVER = Tunnel.getInterface("duth_drop")
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARIABLES
-----------------------------------------------------------------------------------------------------------------------------------------
local nuiOpen = false
local Loots = nil

function client.closeNui()
	nuiOpen = false
	SetNuiFocus(false,false)
	SendNUIMessage({ action = "close" })
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- SPIN
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("spin",function(dt,cb)
	local spinRes = vSERVER.useSpin()
	return cb(spinRes)
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- LOOT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterCommand("loot",function(source,args,rawCommand)
	if Loots == nil then
		Loots = vSERVER.getLootData()
	end

	if not nuiOpen then
		nuiOpen = true
		SendNUIMessage({ action = "show", items = Loots })
		SetNuiFocus(true,true)
	end
end)